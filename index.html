<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Italian Flash Cards</title>
  <style>
    :root{
      --bg-deep-blue: #062744; /* deep blue background */
      --card-white: #ffffff;
      --card-text: #000000;
      --accent: #0ea5b9;
    }
    html,body{
      height:100%;
      margin:0;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      background: linear-gradient(180deg, var(--bg-deep-blue) 0%, #08365a 100%);
      color:var(--card-text);
      -webkit-font-smoothing:antialiased;
      -moz-osx-font-smoothing:grayscale;
    }

    .app {
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px;
      box-sizing:border-box;
    }

    .container {
      width:100%;
      max-width:900px;
      display:grid;
      grid-template-columns: 1fr 320px;
      gap:28px;
      align-items:start;
    }

    /* Card area */
    .card-wrap{
      perspective:1400px;
      display:flex;
      align-items:center;
      justify-content:center;
      min-height:420px;
    }

    .card {
      width:100%;
      max-width:640px;
      height:360px;
      background:var(--card-white);
      color:var(--card-text);
      border-radius:12px;
      box-shadow: 0 10px 30px rgba(2,6,23,0.45);
      position:relative;
      transform-style:preserve-3d;
      transition: transform 600ms cubic-bezier(.2,.9,.3,1);
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:center;
      user-select:none;
    }

    .card.is-flipped{
      transform: rotateY(180deg);
    }

    .card-face{
      position:absolute;
      inset:0;
      padding:28px;
      box-sizing:border-box;
      display:flex;
      align-items:center;
      justify-content:center;
      text-align:center;
      backface-visibility:hidden;
      border-radius:12px;
      flex-direction:column;
    }

    .card-front{
      font-size:48px;
      font-weight:700;
      line-height:1.05;
    }

    .card-back{
      transform: rotateY(180deg);
      font-size:28px;
      font-weight:600;
      color:var(--card-text);
    }

    .small-note{
      font-size:14px;
      color:rgba(0,0,0,0.6);
      margin-top:12px;
      font-weight:500;
    }

    /* Sidebar controls */
    .sidebar {
      background: rgba(255,255,255,0.06);
      border-radius:12px;
      padding:18px;
      color:#fff;
      display:flex;
      flex-direction:column;
      gap:14px;
      min-height:200px;
      box-shadow: 0 6px 18px rgba(2,6,23,0.35);
    }

    .controls {
      display:flex;
      gap:10px;
      flex-wrap:wrap;
    }

    button {
      background:var(--card-white);
      color:var(--card-text);
      border:0;
      padding:10px 12px;
      border-radius:10px;
      font-weight:600;
      cursor:pointer;
      box-shadow:0 6px 12px rgba(2,6,23,0.15);
    }
    button:active{ transform: translateY(1px); }
    .btn-ghost{
      background:transparent;
      border: 1px solid rgba(255,255,255,0.14);
      color: #fff;
    }

    .progress {
      margin-top:8px;
      width:100%;
    }

    .progress-bar {
      height:10px;
      background:rgba(255,255,255,0.12);
      border-radius:999px;
      overflow:hidden;
    }
    .progress-bar > i {
      display:block;
      height:100%;
      width:0%;
      background:linear-gradient(90deg,var(--accent), #60a5fa);
      transition: width 300ms ease;
    }

    .meta {
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:center;
    }

    .hint {
      font-size:13px;
      color:rgba(255,255,255,0.8);
    }

    .footer-small {
      margin-top:auto;
      font-size:12px;
      color:rgba(255,255,255,0.65);
    }

    /* Responsive */
    @media (max-width:920px){
      .container{ grid-template-columns: 1fr; padding-bottom:24px; }
      .sidebar{ order:2; }
    }

    /* Accessibility focus */
    button:focus, .card:focus {
      outline: 3px solid rgba(14,165,185,0.18);
      outline-offset:4px;
    }
  </style>
</head>
<body>
  <div class="app">
    <div class="container" role="application" aria-label="Italian flash cards app">
      <div class="card-wrap">
        <div id="card" class="card" tabindex="0" aria-live="polite" role="button" aria-pressed="false">
          <div class="card-face card-front" id="card-front">
            <!-- Italian word -->
            <div id="word-front">Ciao</div>
            <div class="small-note" id="front-note">Click the card or press Space to flip</div>
          </div>
          <div class="card-face card-back" id="card-back">
            <!-- English translation -->
            <div id="word-back">Hello</div>
            <div class="small-note" id="back-note">Press → and ← to navigate</div>
          </div>
        </div>
      </div>

      <aside class="sidebar" aria-label="controls">
        <div class="meta">
          <div>
            <div style="font-size:18px;font-weight:700">Italian → English</div>
            <div style="font-size:13px;color:rgba(255,255,255,0.8)">20 words</div>
          </div>
          <div style="text-align:right">
            <div style="font-weight:700;font-size:16px" id="card-count">1 / 20</div>
            <div style="font-size:12px;color:rgba(255,255,255,0.72)" id="current-index-label">Card 1</div>
          </div>
        </div>

        <div class="controls" role="group" aria-label="card controls">
          <button id="prevBtn" title="Previous (←)">← Previous</button>
          <button id="flipBtn" title="Flip (Space)">Flip</button>
          <button id="nextBtn" title="Next (→)">Next →</button>
          <button id="shuffleBtn" class="btn-ghost" title="Shuffle cards">Shuffle</button>
        </div>

        <div class="progress" aria-hidden="false">
          <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:8px;">
            <div class="hint">Progress</div>
            <div style="font-weight:700" id="progressPercent">5%</div>
          </div>
          <div class="progress-bar" aria-hidden="true">
            <i id="progressFill"></i>
          </div>
        </div>

        <div style="display:flex;gap:10px;margin-top:12px;">
          <button id="showAnswerBtn" class="btn-ghost" title="Show answer without flipping">Show Answer</button>
          <button id="resetBtn" class="" title="Reset order">Restart</button>
        </div>

        <div class="footer-small">
          Keyboard Functions:
        <div class="footer-small">
          Space = flip
        <div class="footer-small">
          ←/→ = prev/next
        <div class="footer-small">
          S = shuffle
        </div>
      </aside>
    </div>
  </div>

  <script>
    // 20 Italian → English pairs
    const cards = [
      {it: "Ciao", en: "Hello / Hi"},
      {it: "Grazie", en: "Thank you"},
      {it: "Per favore", en: "Please"},
      {it: "Sì", en: "Yes"},
      {it: "No", en: "No"},
      {it: "Buongiorno", en: "Good morning"},
      {it: "Buonanotte", en: "Good night"},
      {it: "Scusa", en: "Sorry / Excuse me"},
      {it: "Mi chiamo...", en: "My name is..."},
      {it: "Come stai?", en: "How are you?"},
      {it: "Bene", en: "Well / Good"},
      {it: "Male", en: "Bad"},
      {it: "Dove?", en: "Where?"},
      {it: "Quando?", en: "When?"},
      {it: "Perché?", en: "Why?"},
      {it: "Quanto?", en: "How much?"},
      {it: "Acqua", en: "Water"},
      {it: "Pane", en: "Bread"},
      {it: "Formaggio", en: "Cheese"},
      {it: "Scuola", en: "School"}
    ];

    // Keep original order for Reset
    const original = cards.map(c => ({...c}));

    // state
    let deck = cards.slice();
    let idx = 0;
    let flipped = false;

    // elements
    const cardEl = document.getElementById('card');
    const frontEl = document.getElementById('word-front');
    const backEl = document.getElementById('word-back');
    const cardCount = document.getElementById('card-count');
    const currentIndexLabel = document.getElementById('current-index-label');
    const progressFill = document.getElementById('progressFill');
    const progressPercent = document.getElementById('progressPercent');

    // buttons
    const prevBtn = document.getElementById('prevBtn');
    const nextBtn = document.getElementById('nextBtn');
    const flipBtn = document.getElementById('flipBtn');
    const shuffleBtn = document.getElementById('shuffleBtn');
    const showAnswerBtn = document.getElementById('showAnswerBtn');
    const resetBtn = document.getElementById('resetBtn');

    function render() {
      const card = deck[idx];
      frontEl.textContent = card.it;
      backEl.textContent = card.en;
      cardCount.textContent = (idx+1) + ' / ' + deck.length;
      currentIndexLabel.textContent = 'Card ' + (idx+1);
      const pct = Math.round(((idx+1) / deck.length) * 100);
      progressFill.style.width = pct + '%';
      progressPercent.textContent = pct + '%';
      // ensure face state
      if (flipped) {
        cardEl.classList.add('is-flipped');
        cardEl.setAttribute('aria-pressed','true');
      } else {
        cardEl.classList.remove('is-flipped');
        cardEl.setAttribute('aria-pressed','false');
      }
    }

    function flipCard() {
      flipped = !flipped;
      render();
    }

    function showAnswerTemporarily() {
      // flips to show answer, then returns to front after 1.6s
      if (!flipped) {
        flipped = true;
        render();
        setTimeout(() => {
          flipped = false;
          render();
        }, 1600);
      } else {
        flipped = false;
        render();
      }
    }

    function nextCard(offset = 1) {
      idx = (idx + offset + deck.length) % deck.length;
      flipped = false;
      render();
    }

    function prevCard() { nextCard(-1); }

    function shuffleDeck() {
      // Fisher-Yates
      for (let i = deck.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [deck[i], deck[j]] = [deck[j], deck[i]];
      }
      idx = 0;
      flipped = false;
      render();
    }

    function resetDeck() {
      deck = original.map(c => ({...c}));
      idx = 0;
      flipped = false;
      render();
    }

    // click handlers
    cardEl.addEventListener('click', () => flipCard());
    flipBtn.addEventListener('click', () => flipCard());
    nextBtn.addEventListener('click', () => nextCard(1));
    prevBtn.addEventListener('click', () => prevCard());
    shuffleBtn.addEventListener('click', () => shuffleDeck());
    showAnswerBtn.addEventListener('click', () => showAnswerTemporarily());
    resetBtn.addEventListener('click', () => resetDeck());

    // keyboard navigation
    document.addEventListener('keydown', (e) => {
      if (e.key === ' ' || e.code === 'Space') {
        // prevent scrolling
        e.preventDefault();
        flipCard();
      } else if (e.key === 'ArrowRight') {
        nextCard(1);
      } else if (e.key === 'ArrowLeft') {
        prevCard();
      } else if (e.key.toLowerCase() === 's') {
        shuffleDeck();
      }
    });

    // initial render
    render();

    // for accessibility: focus styles and focusing card
    cardEl.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') flipCard();
    });

    // touch: detect long press to reveal (optional)
    let touchTimer = null;
    cardEl.addEventListener('touchstart', () => {
      touchTimer = setTimeout(() => {
        if (!flipped) {
          flipped = true;
          render();
        }
      }, 600);
    });
    cardEl.addEventListener('touchend', () => {
      clearTimeout(touchTimer);
    });

  </script>
</body>
</html>
